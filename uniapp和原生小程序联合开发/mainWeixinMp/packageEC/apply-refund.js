require('./common/vendor.js');(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["packageEC/apply-refund"],{2018:function(e,t,o){"use strict";var r=o("2453"),n=o.n(r);n.a},2453:function(e,t,o){},"34b1":function(e,t,o){"use strict";t["a"]=function(e){e.options.wxsCallMethods||(e.options.wxsCallMethods=[])}},5346:function(e,t,o){"use strict";(function(e,r){var n=o("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(o("22cb")),a={components:{ProdCard:function(){o.e("packageEC/components/prod-card").then(function(){return resolve(o("b165"))}.bind(null,o)).catch(o.oe)},userPrivacy:function(){o.e("components/userPrivacy/userPrivacy").then(function(){return resolve(o("594f"))}.bind(null,o)).catch(o.oe)}},data:function(){return{photoFiles:[],orderNum:"",orderInfo:{orderItemDtos:[]},refundProdReasonArray:["拍错/多拍/不喜欢","协商一致退款","商品破损/少件","商品与描述不符","卖家发错货","质量问题","其他"],refundProdValue:0,form:{buyerMobile:"",buyerDesc:""},showPrivacy:!1}},computed:{refundProdName:function(){return this.refundProdValue<0?"":this.refundProdReasonArray[this.refundProdValue]}},onLoad:function(t){var o=this;this.orderNum=t.orderNum,this.getDetail(),e.onNeedPrivacyAuthorization&&e.onNeedPrivacyAuthorization((function(e,t){o.showPrivacy=!0,o.resolvePrivacyAuthorization=e}))},methods:{agreePrivacy:function(){this.showPrivacy=!1,this.resolvePrivacyAuthorization({buttonId:"agree-btn",event:"agree"})},disagreePrivacy:function(){this.showPrivacy=!1},getDetail:function(){var e=this;this.$httpOrder.get("/p/myOrder/orderDetail?orderNumber="+this.orderNum).then((function(t){e.orderInfo=t})).catch((function(e){console.log(e)}))},refundPicPreView:function(e){var t=e.currentTarget.dataset.cur,o=[];this.photoFiles.forEach((function(e){o.push(e.url)})),r.previewImage({current:t,urls:o})},removeImage:function(e){var t=e.currentTarget.dataset.idx,o=this.photoFiles;o.splice(t,1),this.photoFiles=o},getUploadImg:function(t){t.target.dataset.idx;var o=this;e.chooseImage({count:5,sizeType:["compressed"],sourceType:["album","camera"],success:function(e){var t=e.tempFilePaths;r.showLoading({mask:!0});var n={url:"/p/file/upload",filePath:t[0],name:"file",callBack:function(e){r.hideLoading();var t={};t.path=JSON.parse(e).filePath,t.url=JSON.parse(e).resourcesUrl+JSON.parse(e).filePath;var n=o.photoFiles;n.push(t),o.photoFiles=n}};(0,i.default)(n)}})},refundReasonChange:function(e){this.refundProdValue=e.detail.value},applyRefund:function(){var e=this,t="";this.photoFiles.forEach((function(e){t+=e.path+","})),""!=t&&(t=t.substring(0,t.length-1)),0!=this.form.buyerMobile.length?11===this.form.buyerMobile.length&&/^1(3|4|5|6|7|8|9)\d{9}$/.test(this.form.buyerMobile)?0!=this.form.buyerDesc.length?this.form.buyerDesc.length>50?r.showToast({icon:"none",title:"请填写不超50字的说明"}):(r.showLoading(),this.$httpMeet.get("/api/meeting-room-occupation/cancellable",{orderNo:this.orderNum}).then((function(o){return o.data?e.$httpOrder.post("/p/orderRefund/apply",{orderNumber:e.orderNum,applyType:1,isReceiver:0,buyerReason:e.refundProdValue,refundAmount:e.orderInfo.actualTotal,buyerMobile:e.form.buyerMobile,buyerDesc:e.form.buyerDesc,photoFiles:t,refundType:1}):Promise.reject(o.message)})).then((function(e){r.hideLoading(),r.redirectTo({url:"/packageEC/after-sales"})})).catch((function(e){r.hideLoading(),r.showToast({icon:"none",title:e.data||e.message||e})}))):r.showToast({icon:"none",title:"请填写退款说明"}):r.showToast({icon:"none",title:"请输入正确的手机号码"}):r.showToast({icon:"none",title:"请输入手机号码"})}}};t.default=a}).call(this,o("bc2e")["default"],o("543d")["default"])},"5c61":function(e,t,o){"use strict";(function(e,t){var r=o("4ea4");o("895d");r(o("66fd"));var n=r(o("9e1e"));e.__webpack_require_UNI_MP_PLUGIN__=o,t(n.default)}).call(this,o("bc2e")["default"],o("543d")["createPage"])},"8e3b":function(e,t,o){"use strict";o.d(t,"b",(function(){return n})),o.d(t,"c",(function(){return i})),o.d(t,"a",(function(){return r}));var r={uIcon:function(){return o.e("components/u-icon/u-icon").then(o.bind(null,"9ed9"))},userPrivacy:function(){return o.e("components/userPrivacy/userPrivacy").then(o.bind(null,"594f"))}},n=function(){var e=this.$createElement,t=(this._self._c,this.photoFiles.length);this.$mp.data=Object.assign({},{$root:{g0:t}})},i=[]},"9e1e":function(e,t,o){"use strict";o.r(t);var r=o("8e3b"),n=o("b964");for(var i in n)["default"].indexOf(i)<0&&function(e){o.d(t,e,(function(){return n[e]}))}(i);o("2018");var a=o("f0c5"),u=o("34b1"),c=Object(a["a"])(n["default"],r["b"],r["c"],!1,null,"0c54e2f6",null,!1,r["a"],void 0);"function"===typeof u["a"]&&Object(u["a"])(c),t["default"]=c.exports},b964:function(e,t,o){"use strict";o.r(t);var r=o("5346"),n=o.n(r);for(var i in r)["default"].indexOf(i)<0&&function(e){o.d(t,e,(function(){return r[e]}))}(i);t["default"]=n.a}},[["5c61","common/runtime","common/vendor","packageEC/common/vendor"]]]);