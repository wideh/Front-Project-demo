require('./common/vendor.js');(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["packageEC/confirm-order"],{"0c4f":function(t,o,e){"use strict";(function(t,o){var n=e("4ea4");e("895d");n(e("66fd"));var r=n(e("2748"));t.__webpack_require_UNI_MP_PLUGIN__=e,o(r.default)}).call(this,e("bc2e")["default"],e("543d")["createPage"])},2748:function(t,o,e){"use strict";e.r(o);var n=e("f57a"),r=e("983b");for(var a in r)["default"].indexOf(a)<0&&function(t){e.d(o,t,(function(){return r[t]}))}(a);e("c122");var s=e("f0c5"),i=e("85f8"),u=Object(s["a"])(r["default"],n["b"],n["c"],!1,null,"3d524d0f",null,!1,n["a"],void 0);"function"===typeof i["a"]&&Object(i["a"])(u),o["default"]=u.exports},"4cbb":function(t,o,e){},"736a":function(t,o,e){"use strict";(function(t){var n=e("4ea4");Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var r=n(e("7037")),a=n(e("9523")),s=e("26cb");function i(t,o){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);o&&(n=n.filter((function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable}))),e.push.apply(e,n)}return e}function u(t){for(var o=1;o<arguments.length;o++){var e=null!=arguments[o]?arguments[o]:{};o%2?i(Object(e),!0).forEach((function(o){(0,a.default)(t,o,e[o])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):i(Object(e)).forEach((function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(e,o))}))}return t}var c={components:{AddressCard:function(){e.e("packageEC/components/address-card").then(function(){return resolve(e("7e60"))}.bind(null,e)).catch(e.oe)},OrderCard:function(){e.e("packageEC/components/order-card").then(function(){return resolve(e("f392"))}.bind(null,e)).catch(e.oe)}},data:function(){return{remarks:"",payType:11,submitCoupons:{},param:{},name:"",phone:"",orderType:"",placeOrderInfo:{},prodId:""}},computed:u(u({},(0,s.mapState)(["buyProdInfo"])),{},{shopCartOrdersItem:function(){if(console.log("返回数据",this.buyProdInfo),null!=this.buyProdInfo){var t={totalLength:this.buyProdInfo.shopCartOrders[0].coupons.length,canUseCoupons:[],unCanUseCoupons:[]};return this.buyProdInfo.shopCartOrders[0].coupons.forEach((function(o){o.canUse?t.canUseCoupons.push(o):t.unCanUseCoupons.push(o)})),this.submitCoupons=t,this.buyProdInfo.shopCartOrders[0]}return{}},isCouponMultiple:function(){return this.buyProdInfo.isCouponMultiple},shopCartItemDiscountsItem:function(){return this.shopCartOrdersItem.shopCartItemDiscounts[0]}}),onLoad:function(o){var e=this;t.$on("comfirm-order-param",(function(t){console.log("参数",t),e.param=t})),"place"===o.type&&(this.orderType="place",this.prodId=o.prodId,this.placeOrderInfo={personCount:o.personCount,unitHours:o.unitHours,hours:o.hours})},created:function(){},methods:{getData:function(){t.showLoading({}),this.$store.dispatch("submitConfirm",this.param).then((function(o){t.hideLoading()}))},choosedCoupon:function(t){this.param.couponIds=null,this.param.couponUserIds=t.couponInfoList,this.getData()},addressChange:function(t){var o=t.addrId,e=t.payType;this.payType=e,this.param.addrId=o,this.$store.dispatch("submitConfirmChange",{addrId:o})},goPayWay:function(){if(!this.buyProdInfo.userAddr)return t.showToast({icon:"none",title:"请添加地址"}),void(this.$refs.addressCard.popupShow=!0);this.handleSubmit()},handleSubmit:function(){t.showLoading({title:"请稍后...",mask:!0});var o=this,e=t.getStorageSync(o.$config.storageKeys.shopId);"object"===(0,r.default)(e)&&e.failed?t.showToast({icon:"none",title:e.message}):this.$httpOrder.post("/p/order/submit",{orderShopParam:[{remarks:this.remarks,shopId:e,payType:this.payType}],coupons:{totalLength:0,canUseCoupons:[],unCanUseCoupons:[]},isScorePay:0,orderSelfStationDto:{stationTime:"",stationUserMobile:"",stationUserName:""}}).then((function(e){0==o.shopCartOrdersItem.actualTotal?o.toPay(e.orderNumbers):(t.hideLoading(),t.redirectTo({url:"/packageEC/pay-way?orderNumbers="+e.orderNumbers+"&payGuid="+o.buyProdInfo.payGuid}))})).catch((function(o){t.hideLoading(),o.data&&setTimeout((function(){t.showToast({icon:"none",title:o.data})}),0)}))},toPay:function(o){this.$httpOrder.post("/p/order/pay",{payType:12,orderNumbers:o,openId:t.getStorageSync("openId"),isScore:0}).then((function(o){t.hideLoading(),t.redirectTo({url:"/packageEC/my-order"})})).catch((function(o){t.hideLoading(),o.data&&setTimeout((function(){t.showToast({icon:"none",title:o.data})}),0)}))}}};o.default=c}).call(this,e("543d")["default"])},"85f8":function(t,o,e){"use strict";o["a"]=function(t){t.options.wxsCallMethods||(t.options.wxsCallMethods=[])}},"983b":function(t,o,e){"use strict";e.r(o);var n=e("736a"),r=e.n(n);for(var a in n)["default"].indexOf(a)<0&&function(t){e.d(o,t,(function(){return n[t]}))}(a);o["default"]=r.a},c122:function(t,o,e){"use strict";var n=e("4cbb"),r=e.n(n);r.a},f57a:function(t,o,e){"use strict";e.d(o,"b",(function(){return n})),e.d(o,"c",(function(){return r})),e.d(o,"a",(function(){}));var n=function(){var t=this.$createElement;this._self._c},r=[]}},[["0c4f","common/runtime","common/vendor"]]]);