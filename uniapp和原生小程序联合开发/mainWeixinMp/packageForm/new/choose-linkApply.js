(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["packageForm/new/choose-linkApply"],{1714:function(t,e,i){"use strict";i.r(e);var a=i("f6bb"),n=i.n(a);for(var s in a)["default"].indexOf(s)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(s);e["default"]=n.a},"3ab7":function(t,e,i){"use strict";var a=i("bd41"),n=i.n(a);n.a},"5bbf":function(t,e,i){"use strict";i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return s})),i.d(e,"a",(function(){return a}));var a={uniEasyinput:function(){return i.e("uni_modules/uni-easyinput/components/uni-easyinput/uni-easyinput").then(i.bind(null,"f7da"))}},n=function(){var t=this,e=t.$createElement,i=(t._self._c,t.filterData1.length>0&&"1"==t.active),a=i?t.__map(t.filterData1,(function(e,i){var a=t.__get_orig(e),n=e.simple_data&&e.simple_data.length>0;return{$orig:a,g1:n}})):null,n=0===t.filterData1.length&&"1"==t.active,s=t.filterData2.length>0&&"2"==t.active,l=s?t.__map(t.filterData2,(function(e,i){var a=t.__get_orig(e),n=e.simple_data&&e.simple_data.length>0;return{$orig:a,g4:n}})):null,p=0===t.filterData2.length&&"2"==t.active,r=t.filterData3.length>0&&"3"==t.active,c=r?t.__map(t.filterData3,(function(e,i){var a=t.__get_orig(e),n=e.simple_data&&e.simple_data.length>0;return{$orig:a,g7:n}})):null,o=0===t.filterData3.length&&"3"==t.active,u=t.filterData4.length>0&&"4"==t.active,d=u?t.__map(t.filterData4,(function(e,i){var a=t.__get_orig(e),n=e.simple_data&&e.simple_data.length>0;return{$orig:a,g10:n}})):null,f=0===t.filterData4.length&&"4"==t.active;t.$mp.data=Object.assign({},{$root:{g0:i,l0:a,g2:n,g3:s,l1:l,g5:p,g6:r,l2:c,g8:o,g9:u,l3:d,g11:f}})},s=[]},"68d1":function(t,e,i){"use strict";(function(t,e){var a=i("4ea4");i("895d");a(i("66fd"));var n=a(i("f148"));t.__webpack_require_UNI_MP_PLUGIN__=i,e(n.default)}).call(this,i("bc2e")["default"],i("543d")["createPage"])},bd41:function(t,e,i){},f148:function(t,e,i){"use strict";i.r(e);var a=i("5bbf"),n=i("1714");for(var s in n)["default"].indexOf(s)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(s);i("3ab7");var l=i("f0c5"),p=Object(l["a"])(n["default"],a["b"],a["c"],!1,null,"146870a7",null,!1,a["a"],void 0);e["default"]=p.exports},f6bb:function(t,e,i){"use strict";(function(t){var a=i("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=a(i("448a")),s={name:"chooseLinkApply",components:{NoData:function(){i.e("components/NoData").then(function(){return resolve(i("d1f5"))}.bind(null,i)).catch(i.oe)}},data:function(){return{statusList:[{title:"已提交",key:"1"},{title:"待处理",key:"2"},{title:"已处理",key:"3"},{title:"抄送我",key:"4"}],active:"1",searchText:"",isInSearch:!1,timeId:null,applyList1:[],applyList2:[],applyList3:[],applyList4:[],triggered:!0,scrollTop:0,old:{scrollTop:0},page1:1,pageSize1:10,pages1:1,page2:1,pageSize2:10,pages2:1,page3:1,pageSize3:10,pages3:1,page4:1,pageSize4:10,pages4:1,checkTotal:0,selectId1:[],selectId2:[],selectId3:[],selectId4:[],oldSelectIds1:[],oldSelectIds2:[],oldSelectIds3:[],oldSelectIds4:[]}},computed:{filterData1:function(){var t=this;return this.searchText?(this.applyList1||[]).filter((function(e){return!!(e.approvalType&&e.approvalType.indexOf(t.searchText)>-1||e.startEmployee&&e.startEmployee.indexOf(t.searchText)>-1)})):(this.applyList1||[]).filter((function(t){return!0}))},filterData2:function(){var t=this;return this.searchText?(this.applyList2||[]).filter((function(e){return!!(e.approvalType&&e.approvalType.indexOf(t.searchText)>-1||e.startEmployee&&e.startEmployee.indexOf(t.searchText)>-1)})):(this.applyList2||[]).filter((function(t){return!0}))},filterData3:function(){var t=this;return this.searchText?(this.applyList3||[]).filter((function(e){return!!(e.approvalType&&e.approvalType.indexOf(t.searchText)>-1||e.startEmployee&&e.startEmployee.indexOf(t.searchText)>-1)})):(this.applyList3||[]).filter((function(t){return!0}))},filterData4:function(){var t=this;return this.searchText?(this.applyList4||[]).filter((function(e){return!!(e.approvalType&&e.approvalType.indexOf(t.searchText)>-1||e.startEmployee&&e.startEmployee.indexOf(t.searchText)>-1)})):(this.applyList4||[]).filter((function(t){return!0}))}},onLoad:function(e){var i=this;console.log("选择关联申请onload");this.getList({page:1,pageSize:10}),t.$off("goto-LinkApply"),t.$on("goto-LinkApply",(function(t){if(console.log("已选id回显",t),t){t["1"].forEach((function(t){i.oldSelectIds1.push(t.id),i.selectId1.push(t.id)})),t["2"].forEach((function(t){i.oldSelectIds2.push(t.id),i.selectId2.push(t.id)})),t["3"].forEach((function(t){i.oldSelectIds3.push(t.id),i.selectId3.push(t.id)})),t["4"].forEach((function(t){i.oldSelectIds4.push(t.id),i.selectId4.push(t.id)})),i.checkTotal=i.oldSelectIds1.length+i.oldSelectIds2.length+i.oldSelectIds3.length+i.oldSelectIds4.length;var e=i.applyList1.map((function(t){var e=i.oldSelectIds1.findIndex((function(e){return e==t.id}));return t.check=e>-1,t}));i.applyList1=e}else{var a=i.applyList1.map((function(t){return t.check=!1,t}));i.applyList1=a}}))},methods:{error:function(e){t.hideLoading(),t.showToast({icon:"none",title:e||"系统繁忙，请稍候重试",duration:2500})},getList:function(t){var e=this,i=this,a=this.active,s="/approval/list/mine?isMiniProgram=1";"1"==a?s="/approval/list/mine?isMiniProgram=1":"2"==a?s="/approval/list/shouldApprovalByMe?isMiniProgram=1":"3"==a?s="/approval/list/alreadyApprovalByMe?isMiniProgram=1":"4"==a&&(s="/approval/list/copyToMe?isMiniProgram=1"),this.$httpWorkflow.post("".concat(s),{page:t.page,pageSize:t.pageSize}).then((function(t){if(t&&t.success){var s=t.result;if(console.log("获取列表",s.records),"1"==a){i.page1=s.current,i.pageSize1=s.size,i.pages1=s.pages,i.applyList1.length<s.total?i.applyList1=[].concat((0,n.default)(i.applyList1),(0,n.default)(s.records)):i.applyList1=s.records;var l=e.applyList1.map((function(t){var i=e.oldSelectIds1.findIndex((function(e){return e==t.id}));return t.check=i>-1,t}));e.applyList1=l}else if("2"==a){i.page2=s.current,i.pageSize2=s.size,i.pages2=s.pages,i.applyList2.length<s.total?i.applyList2=[].concat((0,n.default)(i.applyList2),(0,n.default)(s.records)):i.applyList2=s.records;var p=e.applyList2.map((function(t){var i=e.oldSelectIds2.findIndex((function(e){return e==t.id}));return t.check=i>-1,t}));e.applyList2=p}else if("3"==a){i.page3=s.current,i.pageSize3=s.size,i.pages3=s.pages,i.applyList3.length<s.total?i.applyList3=[].concat((0,n.default)(i.applyList3),(0,n.default)(s.records)):i.applyList3=s.records;var r=e.applyList3.map((function(t){var i=e.oldSelectIds3.findIndex((function(e){return e==t.id}));return t.check=i>-1,t}));e.applyList3=r}else if("4"==a){i.page4=s.current,i.pageSize4=s.size,i.pages4=s.pages,i.applyList4.length<s.total?i.applyList4=[].concat((0,n.default)(i.applyList4),(0,n.default)(s.records)):i.applyList4=s.records;var c=e.applyList4.map((function(t){var i=e.oldSelectIds4.findIndex((function(e){return e==t.id}));return t.check=i>-1,t}));e.applyList4=c}}})).catch((function(t){console.log(t)}))},navChange:function(t){this.active=t,this.getList({page:1,pageSize:10})},onSearchChange:function(){},onBlur:function(){var t=this;this.searchText?(this.isInSearch=!0,this.getList({page:1,pageSize:10}),setTimeout((function(){t.isInSearch=!1}),1e3)):this.getList({page:1,pageSize:10})},onIconClick:function(){this.isInSearch||this.getList({page:1,pageSize:10})},scrolltolower:function(){var t=this.active;if("1"==t){if(!(this.page1<this.pages1))return;this.page1+=1,this.getList({page:this.page1,pageSize:this.pageSize1})}else if("2"==t){if(!(this.page2<this.pages2))return;this.page2+=1,this.getList({page:this.page2,pageSize:this.pageSize2})}else if("3"==t){if(!(this.page3<this.pages3))return;this.page3+=1,this.getList({page:this.page3,pageSize:this.pageSize3})}else if("4"==t){if(!(this.page4<this.pages4))return;this.page4+=1,this.getList({page:this.page4,pageSize:this.pageSize4})}},onRefresh:function(){var t=this;this.triggered=!0,setTimeout((function(){t.triggered=!1;var e=t.active;"1"==e?t.applyList1=[]:"2"==e?t.applyList2=[]:"3"==e?t.applyList3=[]:"4"==e&&(t.applyList4=[]),t.getList({page:1,pageSize:10})}),1e3)},checkboxChange:function(t){var e=this,i=t.detail.value;console.log("旧选择值",this.oldSelectIds1),console.log("新改变value",i);var a=this.active;if("1"==a){var s=i,l=this.oldSelectIds1,p=[];l.length>0?s.map((function(t){l.map((function(i){var a=e.applyList1.findIndex((function(t){return t.id==i})),n=e.applyList1.findIndex((function(e){return e.id==t}));t==i?p.push(t):a<0?p.push(i):-1!=n&&p.push(t)}))})):p=s,p=(0,n.default)(new Set(p)),console.log("tempIds",p),this.oldSelectIds1=p,this.selectId1=p}else if("2"==a){var r=i,c=this.oldSelectIds2,o=[];c.length>0?r.map((function(t){c.map((function(i){var a=e.applyList2.findIndex((function(t){return t.id==i})),n=e.applyList2.findIndex((function(e){return e.id==t}));t==i?o.push(t):a<0?o.push(i):-1!=n&&o.push(t)}))})):o=r,o=(0,n.default)(new Set(o)),console.log("tempIds",o),this.oldSelectIds2=o,this.selectId2=o}else if("3"==a){var u=i,d=this.oldSelectIds3,f=[];d.length>0?u.map((function(t){d.map((function(i){var a=e.applyList3.findIndex((function(t){return t.id==i})),n=e.applyList3.findIndex((function(e){return e.id==t}));t==i?f.push(t):a<0?f.push(i):-1!=n&&f.push(t)}))})):f=u,f=(0,n.default)(new Set(f)),console.log("tempIds",f),this.oldSelectIds3=f,this.selectId3=f}else if("4"==a){var h=i,g=this.oldSelectIds4,y=[];g.length>0?h.map((function(t){g.map((function(i){var a=e.applyList4.findIndex((function(t){return t.id==i})),n=e.applyList4.findIndex((function(e){return e.id==t}));t==i?y.push(t):a<0?y.push(i):-1!=n&&y.push(t)}))})):y=h,y=(0,n.default)(new Set(y)),console.log("tempIds",y),this.oldSelectIds4=y,this.selectId4=y}var v=this.selectId1.length+this.selectId2.length+this.selectId3.length+this.selectId4.length;if(v>10){console.log("values",i),this.error("最多选择10个关联申请单");var L=this.applyList.map((function(t){return t.id==i[i.length-1]&&(t.check=!1),t}));return console.log("oldData",L),void(this.applyList=(0,n.default)(L))}var I=[];"1"==a?(this.selectId1=i,I=this.applyList1.map((function(t){var i=e.selectId1.findIndex((function(e){return e==t.id}));return t.check=i>-1,t})),console.log("applyList1",I),this.applyList1=I):"2"==a?(this.selectId2=i,I=this.applyList2.map((function(t){var i=e.selectId2.findIndex((function(e){return e==t.id}));return t.check=i>-1,t})),console.log("applyList2",I),this.applyList2=I):"3"==a?(this.selectId3=i,I=this.applyList3.map((function(t){var i=e.selectId3.findIndex((function(e){return e==t.id}));return t.check=i>-1,t})),console.log("applyList3",I),this.applyList3=I):"4"==a&&(this.selectId4=i,I=this.applyList4.map((function(t){var i=e.selectId4.findIndex((function(e){return e==t.id}));return t.check=i>-1,t})),console.log("applyList4",I),this.applyList4=I);var m=this.selectId1.length+this.selectId2.length+this.selectId3.length+this.selectId4.length;this.checkTotal=m},onChooseLinkOk:function(){var e=this.applyList1.filter((function(t){return 1==t.check})),i=this.applyList2.filter((function(t){return 1==t.check})),a=this.applyList3.filter((function(t){return 1==t.check})),s=this.applyList4.filter((function(t){return 1==t.check})),l={1:e,2:i,3:a,4:s};console.log("确认data",l);[].concat((0,n.default)(l["1"]),(0,n.default)(l["2"]),(0,n.default)(l["3"]),(0,n.default)(l["4"]));var p=[].concat((0,n.default)(this.selectId1),(0,n.default)(this.selectId2),(0,n.default)(this.selectId3),(0,n.default)(this.selectId4));t.$emit("choose-LinkApply-callback",l,p),t.navigateBack()},cancelChooseLink:function(){t.navigateBack()}}};e.default=s}).call(this,i("543d")["default"])}},[["68d1","common/runtime","common/vendor"]]]);