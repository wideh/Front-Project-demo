(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["packageVote/voteDetail/voteDetail"],{"0387":function(t,e,n){"use strict";var i=n("f24fc"),o=n.n(i);o.a},"5aff":function(t,e,n){"use strict";(function(t){var i=n("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=i(n("2eee")),a=i(n("c973")),c=i(n("7504")),r={components:{customFooter:function(){n.e("components/custom-footer/custom-footer").then(function(){return resolve(n("7d39"))}.bind(null,n)).catch(n.oe)}},computed:{displayButtonText:function(){if(this.activity){if(1==this.activity.status)return"未开始";if(2==this.activity.status)return"投票";if(3==this.activity.status)return"已结束";if(-1==this.activity.status)return"已下线";if(0==this.activity.status)return"未发布"}return""},displayendDate:function(){if(this.activity.endDate){var t=this.$tool.date.parse(this.activity.endDate);return this.$tool.date.format(t,"yyyy/MM/dd hh:mm")}return""}},data:function(){return{id:0,community:{},activity:{},footerData:null,visible:!1,repetitionInfo:{},optionId:[]}},onLoad:function(e){e&&e.id&&(this.id=e.id),this.community=t.getStorageSync(this.$config.storageKeys.community)},onShow:function(){this.init(),this.getFooterData()},methods:{getFooterData:function(){var t=this;return(0,a.default)(o.default.mark((function e(){var n;return o.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$footerConfig.get();case 2:n=e.sent,t.footerData=n;case 4:case"end":return e.stop()}}),e)})))()},init:function(){var t=this;if(this.id){var e=this;e.$httpVote.get("/".concat(c.default.tenantId,"/voteInformation/").concat(this.id)).then((function(n){console.log("投票请求详情",n);var i=null;n&&n.fileUrl&&(i=t.getImageHttpUrl(n.fileUrl)),n.activityImgSrc=i,e.activity=n})).catch((function(t){console.log(t)}))}},confirm:function(){this.visible=!1,t.navigateBack()},vote:function(){var e=this,n=this;this.optionId&&0==this.optionId.length?t.showToast({icon:"none",title:"请先勾选投票项",duration:1500}):this.activity.type>-1&&this.optionId.length>this.activity.type?t.showToast({icon:"none",title:"最多投".concat(this.activity.type,"项"),duration:1500}):n.$httpVote.request("/".concat(c.default.tenantId,"/voteInformation/vote"),{voteInformationId:this.id,optionIds:this.optionId,openId:t.getStorageSync(this.$config.storageKeys.openId)},{method:"PUT"}).then((function(i){if("成功"==i.message)t.showToast({icon:"none",title:"投票成功，感谢您的支持",duration:1e3}),setTimeout((function(){t.navigateBack()}),1e3);else if(null==i.message&&i.lastVoteTime){if(i.lastVoteTime){var o=e.$tool.date.parse(i.lastVoteTime);i.lastVoteTime=e.$tool.date.format(o,"yyyy-MM-dd hh:mm")}var a=i.optionIds;a&&a.length>0&&(i.list=n.activity.list.filter((function(t){return a.findIndex((function(e){return e==t.id}))>-1}))),e.repetitionInfo=i,e.visible=!0}})).catch((function(t){console.log(t)}))},getImageHttpUrl:function(t){return t?this.$tool.image.getHttpUrl(t):""},radioChange:function(t){console.log(t),this.optionId=[t.detail.value]},checkboxChange:function(t){var e=t.detail.value;this.optionId=e}}};e.default=r}).call(this,n("543d")["default"])},"8c59":function(t,e,n){"use strict";n.r(e);var i=n("5aff"),o=n.n(i);for(var a in i)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(a);e["default"]=o.a},b6d7:function(t,e,n){"use strict";n.r(e);var i=n("ef83"),o=n("8c59");for(var a in o)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(a);n("0387");var c=n("f0c5"),r=Object(c["a"])(o["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],void 0);e["default"]=r.exports},c5c7:function(t,e,n){"use strict";(function(t,e){var i=n("4ea4");n("895d");i(n("66fd"));var o=i(n("b6d7"));t.__webpack_require_UNI_MP_PLUGIN__=n,e(o.default)}).call(this,n("bc2e")["default"],n("543d")["createPage"])},ef83:function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return i}));var i={uModal:function(){return n.e("components/u-modal/u-modal").then(n.bind(null,"2d8b"))}},o=function(){var t=this.$createElement;this._self._c},a=[]},f24fc:function(t,e,n){}},[["c5c7","common/runtime","common/vendor"]]]);