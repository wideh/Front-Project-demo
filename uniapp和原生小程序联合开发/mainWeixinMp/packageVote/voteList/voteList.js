(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["packageVote/voteList/voteList"],{"39e3":function(t,e,n){"use strict";(function(t){var o=n("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=o(n("2eee")),i=o(n("448a")),c=o(n("c973")),r=o(n("7504")),u={components:{activityCard:function(){n.e("packageVote/components/activity-card").then(function(){return resolve(n("22eb"))}.bind(null,n)).catch(n.oe)},pageEmpty:function(){n.e("components/page-empty/page-empty").then(function(){return resolve(n("1068"))}.bind(null,n)).catch(n.oe)},customFooter:function(){n.e("components/custom-footer/custom-footer").then(function(){return resolve(n("7d39"))}.bind(null,n)).catch(n.oe)}},data:function(){return{voteList:[],footerData:null,page:1}},onShow:function(){this.page=1,this.getData(10),this.getFooterData()},onReachBottom:function(){console.log("我已经滚动到底部了"),this.getData(10)},onPullDownRefresh:function(){this.page=1,this.getData(10)},methods:{goToActivity:function(e){t.navigateTo({url:"../voteDetail/voteDetail?id="+e})},getData:function(e){var n=this;return(0,c.default)(a.default.mark((function o(){var c,u,s,l,f;return a.default.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(c=n,o.prev=1,u=t.getStorageSync(c.$config.storageKeys.token),u){o.next=8;break}return o.next=6,c.$token.getByService();case 6:s=o.sent,s.success&&s.token&&(u=s.token);case 8:if(l=t.getStorageSync(c.$config.storageKeys.community),l||!u){o.next=13;break}return o.next=12,c.$basicInfo.setCommunity(u);case 12:l=t.getStorageSync(c.$config.storageKeys.community);case 13:c.community=l,c.community?c.$httpVote.get("/".concat(r.default.tenantId,"/voteInformation/list"),{page:c.page,size:e,regionId:null===(f=l)||void 0===f?void 0:f.id}).then((function(e){var o;if(console.log("投票列表",e),e&&null!==e&&void 0!==e&&e.success)if(1==n.page&&e.result.content.length>0)c.page=(null===(o=e.result)||void 0===o?void 0:o.number)+1,c.voteList=e.result.content;else if(n.page>1&&e.result.content.length>0){var a,r;c.page=(null===(a=e.result)||void 0===a?void 0:a.number)+1,(r=c.voteList).push.apply(r,(0,i.default)(e.result.content))}else{var u;c.page=null===(u=e.result)||void 0===u?void 0:u.number}else c.page=1,c.voteList=[];t.stopPullDownRefresh()})).catch((function(e){console.log(e),t.stopPullDownRefresh()})):(t.stopPullDownRefresh(),t.showModal({title:"未设置小区",content:"请设置您所在的小区",confirmText:"前往设置",success:function(e){e.confirm&&t.navigateTo({url:"/pages/position/position?targetKey="+c.$config.positionKeys.community+"&returnUrl=/packageVote/voteList/voteList"})}})),o.next=21;break;case 17:o.prev=17,o.t0=o["catch"](1),t.stopPullDownRefresh(),console.log("初始进入社区活动获取数据错误>>",o.t0);case 21:case"end":return o.stop()}}),o,null,[[1,17]])})))()},getFooterData:function(){var t=this;return(0,c.default)(a.default.mark((function e(){var n;return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$footerConfig.get();case 2:n=e.sent,t.footerData=n;case 4:case"end":return e.stop()}}),e)})))()}}};e.default=u}).call(this,n("543d")["default"])},"43f1":function(t,e,n){"use strict";(function(t,e){var o=n("4ea4");n("895d");o(n("66fd"));var a=o(n("6a14"));t.__webpack_require_UNI_MP_PLUGIN__=n,e(a.default)}).call(this,n("bc2e")["default"],n("543d")["createPage"])},"6a14":function(t,e,n){"use strict";n.r(e);var o=n("a826"),a=n("e8d1");for(var i in a)["default"].indexOf(i)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(i);var c=n("f0c5"),r=Object(c["a"])(a["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],void 0);e["default"]=r.exports},a826:function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return o}));var o={pageEmpty:function(){return n.e("components/page-empty/page-empty").then(n.bind(null,"1068"))}},a=function(){var t=this.$createElement,e=(this._self._c,this.voteList.length),n=this.voteList&&this.voteList.length>0;this.$mp.data=Object.assign({},{$root:{g0:e,g1:n}})},i=[]},e8d1:function(t,e,n){"use strict";n.r(e);var o=n("39e3"),a=n.n(o);for(var i in o)["default"].indexOf(i)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(i);e["default"]=a.a}},[["43f1","common/runtime","common/vendor"]]]);