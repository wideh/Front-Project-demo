(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["packageWM/order/order"],{"0868":function(t,e,n){"use strict";n.r(e);var a=n("2d7e"),o=n("ce01");for(var r in o)["default"].indexOf(r)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(r);var c=n("f0c5"),i=Object(c["a"])(o["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],void 0);e["default"]=i.exports},"2d7e":function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){}));var a=function(){var t=this.$createElement,e=(this._self._c,this.orderList.length),n=this.orderList.length;this.$mp.data=Object.assign({},{$root:{g0:e,g1:n}})},o=[]},"7ce2":function(t,e,n){"use strict";(function(t){var a=n("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=a(n("2eee")),r=a(n("c973")),c={data:function(){return{orderList:[],type:0,featch:!0,requestData:{status:-1,skip:0,take:10},footerData:null}},onShow:function(){this.orderList=[],this.requestData.skip=0,this.searchOrderList(),this.getFooterData()},onPullDownRefresh:function(){this.orderList=[],this.requestData.skip=0,this.searchOrderList()},onReachBottom:function(){this.featch&&(this.requestData.skip+=10,this.searchOrderList())},methods:{getFooterData:function(){var t=this;return(0,r.default)(o.default.mark((function e(){var n;return o.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$footerConfig.get();case 2:n=e.sent,t.footerData=n;case 4:case"end":return e.stop()}}),e)})))()},selectTitle:function(t){this.orderList=[],this.requestData.skip=0,this.requestData.status=t,this.searchOrderList()},searchOrderList:function(){var e=this,n=e.requestData.status;-1==n&&(n=null),e.featch=!0,this.$http.get("api/v2.0/WeChat/Bookings/Mine?Status=".concat(n,"&Skip=").concat(e.requestData.skip,"&Take=").concat(e.requestData.take)).then((function(n){n.length<e.requestData.take&&(e.featch=!1);var a=e.orderList.concat(n),o={},r=a.reduce((function(t,e){return!o[e.id]&&(o[e.id]=t.push(e)),t}),[]);e.orderList=r,t.hideNavigationBarLoading()})).catch((function(){t.hideNavigationBarLoading()}))},onListClick:function(e,n){var a=this;switch(n){case"goToDetail":this.goToDetail(e);break;case"cancelOrder":t.showModal({content:"是否确定取消订单",success:function(t){t.confirm&&(a.cancelOrder(e),setTimeout((function(){a.orderList=[],a.requestData.skip=0,a.searchOrderList()}),1e3))}});break;case"evaluationOrder":this.evaluationOrder(e);break;default:break}},goToDetail:function(e){t.navigateTo({url:"../order-detail/order-detail?detailId=".concat(e)})},cancelOrder:function(t){this.$http.request("/api/v2.0/WeChat/Bookings/".concat(t,"/Cancel"),null,{method:"PUT"}).then((function(t){console.log(t)})).catch((function(t){console.log(t)}))},evaluationOrder:function(e){t.navigateTo({url:"../sale-activity/comment/comment?detailId=".concat(e)})}},components:{orderTitle:function(){n.e("packageWM/components/order/order-title").then(function(){return resolve(n("47d0"))}.bind(null,n)).catch(n.oe)},orderList:function(){n.e("packageWM/components/order/order-list").then(function(){return resolve(n("74b2"))}.bind(null,n)).catch(n.oe)},empty:function(){n.e("packageWM/components/empty/empty").then(function(){return resolve(n("7ca4"))}.bind(null,n)).catch(n.oe)},ReachBottom:function(){n.e("packageWM/components/reachBottom/reach-bottom").then(function(){return resolve(n("a2ec"))}.bind(null,n)).catch(n.oe)},customFooter:function(){n.e("components/custom-footer/custom-footer").then(function(){return resolve(n("7d39"))}.bind(null,n)).catch(n.oe)}}};e.default=c}).call(this,n("543d")["default"])},ce01:function(t,e,n){"use strict";n.r(e);var a=n("7ce2"),o=n.n(a);for(var r in a)["default"].indexOf(r)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(r);e["default"]=o.a},e64a:function(t,e,n){"use strict";(function(t,e){var a=n("4ea4");n("895d");a(n("66fd"));var o=a(n("0868"));t.__webpack_require_UNI_MP_PLUGIN__=n,e(o.default)}).call(this,n("bc2e")["default"],n("543d")["createPage"])}},[["e64a","common/runtime","common/vendor"]]]);