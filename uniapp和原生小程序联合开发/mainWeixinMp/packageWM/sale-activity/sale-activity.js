(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["packageWM/sale-activity/sale-activity"],{"073a":function(t,n,a){"use strict";(function(t,i){var e=a("4ea4");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=e(a("2eee")),c=e(a("c973")),r={data:function(){return{diningHallId:0,diningHalls:null,campaignMgmts:[],type:0,flag:1,skip:0,take:10,featch:!0,footerData:null}},onLoad:function(){this.getDiningHalls(),this.onClickSearch()},onPullDownRefresh:function(){this.campaignMgmts=[],this.skip=0,this.onClickSearch(),t.stopPullDownRefresh()},onReachBottom:function(){this.featch&&(this.skip+=10,this.onClickSearch())},components:{activityHead:function(){a.e("packageWM/components/sale-activity/sale-activity-head").then(function(){return resolve(a("0eab"))}.bind(null,a)).catch(a.oe)},activityList:function(){a.e("packageWM/components/sale-activity/sale-activity-list").then(function(){return resolve(a("380b"))}.bind(null,a)).catch(a.oe)},returnHome:function(){a.e("components/return-home/return-home").then(function(){return resolve(a("4821"))}.bind(null,a)).catch(a.oe)},empty:function(){a.e("components/page-empty/page-empty").then(function(){return resolve(a("1068"))}.bind(null,a)).catch(a.oe)},ReachBottom:function(){a.e("packageWM/components/reachBottom/reach-bottom").then(function(){return resolve(a("a2ec"))}.bind(null,a)).catch(a.oe)},customFooter:function(){a.e("components/custom-footer/custom-footer").then(function(){return resolve(a("7d39"))}.bind(null,a)).catch(a.oe)}},onShow:function(){this.getFooterData()},methods:{getFooterData:function(){var t=this;return(0,c.default)(o.default.mark((function n(){var a;return o.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.$footerConfig.get();case 2:a=n.sent,t.footerData=a;case 4:case"end":return n.stop()}}),n)})))()},onChangeDiningHall:function(t){this.diningHallId=t,this.campaignMgmts=[],this.onClickSearch(this.diningHallId)},getDiningHalls:function(){var t=this;i.showNavigationBarLoading(),this.$http.get("/api/v2.0/WeChat/DiningHalls").then((function(n){t.diningHalls=[],t.diningHalls.push({id:0,name:"全部",code:"0"}),n.forEach((function(n){return t.diningHalls.push(n)})),i.hideNavigationBarLoading()})).catch((function(){i.hideNavigationBarLoading()}))},onClickSearch:function(){var t=this;switch(t.featch=!0,t.flag){case 1:i.showNavigationBarLoading(),this.$http.get("/api/v2.0/WeChat/Campaigns/Ongoing?diningHallId=".concat(t.diningHallId,"&skip=").concat(t.skip,"&take=").concat(t.take)).then((function(n){n.data.length<t.take&&(t.featch=!1);var a=t.campaignMgmts.concat(n.data),e={},o=a.reduce((function(t,n){return!e[n.id]&&(e[n.id]=t.push(n)),t}),[]);t.campaignMgmts=o,t.type=id,i.hideNavigationBarLoading()})).catch((function(){i.hideNavigationBarLoading()}));break;case 2:i.showNavigationBarLoading(),this.$http.get("/api/v2.0/WeChat/Campaigns/Histories?diningHallId=".concat(t.diningHallId,"&skip=").concat(t.skip,"&take=").concat(t.take)).then((function(n){n.data.length<t.take&&(t.featch=!1),t.campaignMgmts=t.campaignMgmts.concat(n.data),t.type=id,i.hideNavigationBarLoading()})).catch((function(){i.hideNavigationBarLoading()}));break;default:break}},onChangeFooterMenu:function(t){3==t?i.navigateTo({url:"../order/order"}):(this.campaignMgmts=[],this.skip=0,this.diningHallId=0,this.flag=t,this.onClickSearch())}}};n.default=r}).call(this,a("bc2e")["default"],a("543d")["default"])},3860:function(t,n,a){"use strict";(function(t,n){var i=a("4ea4");a("895d");i(a("66fd"));var e=i(a("b5c2"));t.__webpack_require_UNI_MP_PLUGIN__=a,n(e.default)}).call(this,a("bc2e")["default"],a("543d")["createPage"])},4897:function(t,n,a){"use strict";a.r(n);var i=a("073a"),e=a.n(i);for(var o in i)["default"].indexOf(o)<0&&function(t){a.d(n,t,(function(){return i[t]}))}(o);n["default"]=e.a},"5ad9":function(t,n,a){"use strict";a.d(n,"b",(function(){return i})),a.d(n,"c",(function(){return e})),a.d(n,"a",(function(){}));var i=function(){var t=this.$createElement,n=(this._self._c,this.campaignMgmts.length);this.$mp.data=Object.assign({},{$root:{g0:n}})},e=[]},"60b9":function(t,n,a){},"6fcf":function(t,n,a){"use strict";var i=a("60b9"),e=a.n(i);e.a},b5c2:function(t,n,a){"use strict";a.r(n);var i=a("5ad9"),e=a("4897");for(var o in e)["default"].indexOf(o)<0&&function(t){a.d(n,t,(function(){return e[t]}))}(o);a("6fcf");var c=a("f0c5"),r=Object(c["a"])(e["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],void 0);n["default"]=r.exports}},[["3860","common/runtime","common/vendor"]]]);