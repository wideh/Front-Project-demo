(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/all-menus/all-menus"],{"0291":function(e,t,n){},"07e0":function(e,t,n){"use strict";(function(e,i){var a=n("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=a(n("2eee")),r=a(n("448a")),o=a(n("c973")),c=n("1612"),u={name:"allMenus",components:{pageStatusBar:function(){n.e("components/page-status-bar/page-status-bar").then(function(){return resolve(n("9cf9"))}.bind(null,n)).catch(n.oe)},CustomCheckbox:function(){n.e("components/custom-checkbox/custom-checkbox").then(function(){return resolve(n("cc83"))}.bind(null,n)).catch(n.oe)},sudaToast:function(){n.e("components/suda-toast/suda-toast").then(function(){return resolve(n("f067"))}.bind(null,n)).catch(n.oe)}},data:function(){return{isLogin:!1,phoneNumber:"",defaultHouseResourceId:"",titleContainerHeight:0,navigationBarTitle:"全部功能",openEditMune:!1,gridList:[{text:"投诉建议",icon:"https://nova-pms-test-public.oss-cn-shenzhen.aliyuncs.com/hpfm05/0/df91795321874b98b38d9e13d908f748@new_tousujianyi (2).png",code:"hzero.miniprogram.complaintsuggestions.complaint.ps.default",menuType:"物业服务"},{text:"装修申请",icon:"https://nova-pms-test-public.oss-cn-shenzhen.aliyuncs.com/hpfm05/0/de2797e80e9c4f8d839dc77d4219777c@new_bianminshangcheng.png",code:"hzero.miniprogram.decorationmanagement.decorationapplication.ps.default",menuType:"物业服务"},{text:"访客通行",icon:this.$tool.image.staticOssHttp+"wechat_index/index/new_icon-visitor.png",code:"hzero.miniprogram.intelligentaccesscontrol.visitoraccess.ps.default",menuType:"物业服务"},{text:"便民服务",icon:this.$tool.image.staticOssHttp+"wechat_index/index/new_convenience.png",code:"hzero.miniprogram.convenientserviceinformation.convenientservices.ps.default",menuType:"生活服务"},{text:"积分商城",icon:this.$tool.image.staticOssHttp+"wechat_index/index/new_sale-shop.png",code:"hzero.miniprogram.pointsmanagement.pointsmall.ps.default",menuType:"生活服务"},{text:"投票",icon:this.$tool.image.staticOssHttp+"wechat_index/index/new_toupiao.png",code:"hzero.miniprogram.vote.vote.ps.default",menuType:"生活服务"},{text:"房屋服务",icon:"https://nova-pms-test-public.oss-cn-shenzhen.aliyuncs.com/hpfm05/0/82ce6b19a7e6479e848bb3ed8a488c40@new_room-service.svg",code:"hzero.miniprogram.customerservice.customerhouseservices.ps.default",menuType:"生活服务"},{text:"生活缴费",icon:this.$tool.image.staticOssHttp+"wechat_index/index/new_shenghuojiaofei.png",code:"hzero.miniprogram.livingexpenses.paymententrance.ps.default",menuType:"生活服务"},{text:"论坛",icon:this.$tool.image.staticOssHttp+"wechat_index/index/new_forum.png",code:"hzero.miniprogram.forum.forumentrance.ps.default",menuType:"生活服务"},{text:"点餐",icon:this.$tool.image.staticOssHttp+"wechat_index/index/new_sale-server.png",code:"hzero.miniprogram.ordermanagement.order.ps.default",menuType:"生活服务"},{text:"我的快递",icon:this.$tool.image.staticOssHttp+"wechat_index/index/new_wodekuaidi.png",code:"hzero.miniprogram.parcelmanagement.myexpressdelivery.ps.default",menuType:"生活服务"},{text:"合同缴费",icon:this.$tool.image.staticOssHttp+"wechat_index/index/new_contractBill.png",code:"hzero.miniprogram.countercharge.contractpayment.ps.default",menuType:"租赁服务"},{text:"招商租赁",icon:this.$tool.image.staticOssHttp+"wechat_index/me/new_icon-house.png",code:"hzero.miniprogram.propertymanagement.investmentleasing.ps.default",menuType:"租赁服务"},{text:"商家/单位管理",icon:this.$tool.image.staticOssHttp+"wechat_index/index/new_companyStaff.png"}],customFormList:[],wyGridList:[],lifeGridList:[],leaseGridList:[],permissionData:[],checekedGridList:[],checkedCustomFormList:[],user:{},placeList:[],placeItemBaseIcon:this.$tool.image.staticOssHttp+"wechat_index/index/new_huiwu-zul.png"}},onLoad:function(t){var n=e.getSystemInfoSync();"android"==n.platform?this.titleContainerHeight=48:this.titleContainerHeight=44,this.isLogin="true"==t.isLogin,this.phoneNumber="null"===t.phoneNumber?"":t.phoneNumber,this.defaultHouseResourceId=isNaN(Number(t.defaultHouseResourceId))?"":t.defaultHouseResourceId},onShow:function(){var t=(0,o.default)(s.default.mark((function t(){var n;return s.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=this,t.next=3,this.getcustomFormList();case 3:return t.next=5,this.setPermissions().then((function(e){n.showFunctionByPermission()}));case 5:return t.next=7,this.getPlaceList();case 7:this.user=e.getStorageSync(this.$config.storageKeys.user);case 8:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),onBackPress:function(e){console.log("from:"+e.from)},methods:{getPlaceList:function(){var e=this;return(0,o.default)(s.default.mark((function t(){return s.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$httpOrder.get("/category/roomReservationCategoryList").then((function(t){e.placeList=Array.isArray(t)?t:[]}));case 1:case"end":return t.stop()}}),t)})))()},setPermissions:function(){var t=(0,o.default)(s.default.mark((function t(n){var i=this;return s.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,n){var a=i,s=e.getStorageSync(a.$config.storageKeys.token),r=(e.getStorageSync(a.$config.storageKeys.openId),c.permissionDataCode);e.request({url:a.$config.apiIamBaseUrl+"/menus/check-permissions",method:"POST",header:{Authorization:s.token_type+" "+s.access_token},data:r,success:function(n){200==n.statusCode&&n.data&&n.data&&(e.setStorageSync(a.$config.storageKeys.permissionDatasId,n.data),a.permissionData=n.data,t(!0))},fail:function(){e.setStorageSync(a.$config.storageKeys.permissionDatasId,[]),a.permissionData=[],n(!1)}})})));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),showFunctionByPermission:function(){var t=this.permissionData;t=""===t?[]:t;var n=this.gridList,i=n.filter((function(e){return""===e.code||t.some((function(t){return t.code===e.code&&!0===t.approve}))})),a=[],s=this.customFormList,r=e.getStorageSync("filterGridList");if(r&&r.length>=0)for(var o=function(e){var t=r[e];if("customForm"===t.menuType&&t.id){var n=s.find((function(e){return e.id===t.id}));if(n){n.checked=!0;var o={id:n.id,text:n.typeName,checked:!0,menuType:"customForm"};a.push(o)}return"continue"}var c=i.find((function(e){return e.text===t.text}));c&&(c.checked=!0)},c=0;c<r.length;c++)o(c);else i.map((function(e,t){return e.checked=t<7,e}));this.gridList=i,this.customFormList=s;for(var u=[],d=[],l=[],p=0;p<i.length;p++){var h=i[p];"物业服务"===h.menuType&&u.push(h),"生活服务"===h.menuType&&d.push(h),"租赁服务"===h.menuType&&l.push(h),h.checked&&a.push(h)}this.wyGridList=u,this.lifeGridList=d,this.leaseGridList=l,this.checekedGridList=a},getcustomFormList:function(){var e=this;return new Promise((function(t,n){var i=e;i.$httpWorkflow.get("/approval_custom_type/list?customApprovalPermissionType=2").then((function(n){if(n&&n.success){if(n.result&&n.result.length>0){var i=n.result;e.customFormList=i}else e.customFormList=[];t(!0)}else t(!1)})).catch((function(e){console.log(e),t(!1)}))}))},checkIsLogin:function(){return!!this.isLogin||(e.showToast({icon:"none",title:"还没登录"}),!1)},checkBindTelephone:function(){if(this.checkIsLogin()){if(this.phoneNumber)return!0;e.showModal({title:"需要完善您的个人信息",confirmText:"去完善",success:function(t){t.confirm&&e.navigateTo({url:"../login/check/check"})}})}return!1},checkHasResouce:function(){if(this.checkBindTelephone()){if(this.defaultHouseResourceId)return!0;e.showModal({title:"还没有添加任何房间车位",confirmText:"去添加",success:function(t){t.confirm&&e.navigateTo({url:"../me/room/room"})}})}return!1},checkHasRoom:function(){if(this.checkBindTelephone()){if(this.defaultHouseResourceId)return!0;e.showModal({title:"还没有添加任何房间",confirmText:"去添加",success:function(t){t.confirm&&e.navigateTo({url:"/pages/me/room/room"})}})}return!1},onGridItemClick:function(t){var n=this;return(0,o.default)(s.default.mark((function a(){return s.default.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!n.openEditMune){a.next=2;break}return a.abrupt("return");case 2:a.t0=t,a.next=a.t0===c.indexGridListName.投诉建议?5:a.t0===c.indexGridListName.我的快递?7:a.t0===c.indexGridListName.生活缴费?9:a.t0===c.indexGridListName.点餐?11:a.t0===c.indexGridListName.租会议室?13:a.t0===c.indexGridListName.招商租赁?15:a.t0===c.indexGridListName.积分商城?17:a.t0===c.indexGridListName.投票?21:a.t0===c.indexGridListName.便民服务?23:a.t0===c.indexGridListName.合同缴费?25:a.t0===c.indexGridListName.商家单位管理?27:a.t0===c.indexGridListName.论坛?30:a.t0===c.indexGridListName.房屋服务?33:a.t0===c.indexGridListName.装修申请?36:a.t0===c.indexGridListName.访客通行?38:"全部"===a.t0?40:42;break;case 5:return e.navigateTo({url:"/pages/complaints/complaints"}),a.abrupt("break",44);case 7:return e.navigateTo({url:"/packageKD/parcel/parcel"}),a.abrupt("break",44);case 9:return i.navigateToMiniProgram({appId:"wxd2ade0f25a874ee2",path:"",success:function(e){}}),a.abrupt("break",44);case 11:return e.navigateTo({url:"/packageWM/sale-activity/sale-activity"}),a.abrupt("break",44);case 13:return e.navigateTo({url:"/packageMeet/meet-lease"}),a.abrupt("break",44);case 15:return e.navigateTo({url:"/packageZS/house-resource"}),a.abrupt("break",44);case 17:if(n.checkTelephoneAndSavaShopId()){a.next=19;break}return a.abrupt("break",44);case 19:return n.checkIsLogin()&&n.checkBindTelephone()&&e.navigateTo({url:"/pages/nova-mall/pointWeb"}),a.abrupt("break",44);case 21:return e.navigateTo({url:"/packageVote/voteList/voteList"}),a.abrupt("break",44);case 23:return e.navigateTo({url:"/packageConvenience/conveniencelist/conveniencelist"}),a.abrupt("break",44);case 25:return n.checkHasResouce()&&e.navigateTo({url:"/packageBill/contractBill/selectContract/selectContract"}),a.abrupt("break",44);case 27:return console.log("触发商家小程序"),n.goToMerchantProgram(),a.abrupt("break",44);case 30:return console.log("论坛"),e.navigateTo({url:"/pages/forum/forum"}),a.abrupt("break",44);case 33:return n.checkHasResouce()&&e.navigateTo({url:"/packageroomService/serviceType"}),a.abrupt("break",44);case 36:return n.checkIsLogin()&&e.navigateTo({url:"/packageDecoration/history/history?userId="+n.user.userId}),a.abrupt("break",44);case 38:return n.checkHasRoom()&&e.navigateTo({url:"/packageVisitor/visitor/add/add"}),a.abrupt("break",44);case 40:return e.navigateTo({url:"/pages/all-menus/all-menus"}),a.abrupt("break",44);case 42:return e.showToast({icon:"none",title:"敬请期待，稍后上线"}),a.abrupt("break",44);case 44:case"end":return a.stop()}}),a)})))()},onCustomFormItemClick:function(t){this.openEditMune||e.navigateTo({url:"/packageForm/new/new?id=".concat(t)})},clickEditMune:function(){this.openEditMune=!this.openEditMune,this.openEditMune?this.navigationBarTitle="管理首页功能":(e.setStorageSync("filterGridList",this.checekedGridList),e.navigateBack(),this.navigationBarTitle="全部功能")},onClickBack:function(){this.openEditMune?this.openEditMune=!1:e.navigateBack()},settingMenuChange:function(e,t,n,i){if(e&&7==this.checekedGridList.length)this.$refs.sudaToast.show("首页区块最多显示7个功能，请先取消不需要的后再勾选");else if("自定义表单"===i){var a=this.customFormList;a[n].checked=e;var s=this.checekedGridList,o=s.findIndex((function(e){return e.id===t.id}));if(o>-1)e?s[o].checked=e:s.splice(o,1);else if(e){var c={id:t.id,text:t.typeName,checked:e,menuType:"customForm"};s.push(c)}this.checekedGridList=s}else{var u=this.wyGridList,d=this.lifeGridList,l=this.leaseGridList,p=this.gridList,h=this.checekedGridList;"物业服务"===t.menuType&&(u[n].checked=e),"生活服务"===t.menuType&&(d[n].checked=e),"租赁服务"===t.menuType&&(l[n].checked=e),this.wyGridList=(0,r.default)(u),this.lifeGridList=(0,r.default)(d),this.leaseGridList=(0,r.default)(l);var m=h.findIndex((function(e){return e.text===t.text}));m>-1?e?h[m].checked=e:h.splice(m,1):e&&h.push(t),this.checekedGridList=h;var f=p.find((function(e){return e.text===t.text}));f&&(f.checked=e),this.gridList=(0,r.default)(p)}},goToMerchantProgram:function(){e.navigateToMiniProgram({appId:this.$config.merchantProgramAppId,path:"pages/merchant/merchant",extraData:{},success:function(e){}})},getstaticOssUrl:function(e){return e?this.$tool.image.getstaticOssUrl(e):""},checkTelephoneAndSavaShopId:function(){if(this.checkBindTelephone()){var t=this;return this.$httpHd.get("/nova-mall-api/p/shopDetail/getSaasShopId").then((function(n){e.setStorageSync(t.$config.storageKeys.shopId,n)})),!0}return!1},gotoPlacePage:function(t){switch(t.chargeWay){case 0:e.navigateTo({url:"/packageMeet/meet-lease?categoryId="+t.categoryId});break;case 1:e.navigateTo({url:"/packagePlace/home/home?categoryId="+t.categoryId});break;default:break}}}};t.default=u}).call(this,n("543d")["default"],n("bc2e")["default"])},"1f1f":function(e,t,n){"use strict";n.r(t);var i=n("a33d"),a=n("50e0");for(var s in a)["default"].indexOf(s)<0&&function(e){n.d(t,e,(function(){return a[e]}))}(s);n("a9d4");var r=n("f0c5"),o=Object(r["a"])(a["default"],i["b"],i["c"],!1,null,"d94adb82",null,!1,i["a"],void 0);t["default"]=o.exports},"50e0":function(e,t,n){"use strict";n.r(t);var i=n("07e0"),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(s);t["default"]=a.a},a33d:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return s})),n.d(t,"a",(function(){return i}));var i={pageStatusBar:function(){return n.e("components/page-status-bar/page-status-bar").then(n.bind(null,"9cf9"))},sudaToast:function(){return n.e("components/suda-toast/suda-toast").then(n.bind(null,"f067"))}},a=function(){var e=this,t=e.$createElement,n=(e._self._c,e.wyGridList.length),i=n>0?e.__map(e.customFormList,(function(t,n){var i=e.__get_orig(t),a=t.icon?null:e.getstaticOssUrl("wechat-static/index/wupin.svg");return{$orig:i,m0:a}})):null,a=e.lifeGridList.length,s=e.leaseGridList.length,r=e.placeList.length;e.$mp.data=Object.assign({},{$root:{g0:n,l0:i,g1:a,g2:s,g3:r}})},s=[]},a9d4:function(e,t,n){"use strict";var i=n("0291"),a=n.n(i);a.a},b855:function(e,t,n){"use strict";(function(e,t){var i=n("4ea4");n("895d");i(n("66fd"));var a=i(n("1f1f"));e.__webpack_require_UNI_MP_PLUGIN__=n,t(a.default)}).call(this,n("bc2e")["default"],n("543d")["createPage"])}},[["b855","common/runtime","common/vendor"]]]);