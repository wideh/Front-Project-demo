(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/door/opendoor"],{"5d08":function(t,e,o){"use strict";o.r(e);var n=o("622c"),i=o.n(n);for(var r in n)["default"].indexOf(r)<0&&function(t){o.d(e,t,(function(){return n[t]}))}(r);e["default"]=i.a},"622c":function(t,e,o){"use strict";(function(t){var n=o("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=n(o("2eee")),r=n(o("c973")),s=(n(o("3f26")),o("1612")),a={components:{uniIcons:function(){Promise.all([o.e("common/vendor"),o.e("node-modules/@dcloudio/uni-ui/lib/uni-icons/uni-icons")]).then(function(){return resolve(o("1533"))}.bind(null,o)).catch(o.oe)},pageEmpty:function(){o.e("components/page-empty/page-empty").then(function(){return resolve(o("1068"))}.bind(null,o)).catch(o.oe)},customFooter:function(){o.e("components/custom-footer/custom-footer").then(function(){return resolve(o("7d39"))}.bind(null,o)).catch(o.oe)},doorHead:function(){o.e("components/door/door-head").then(function(){return resolve(o("00ec"))}.bind(null,o)).catch(o.oe)},doorBluetooth:function(){o.e("pages/door/doorBluetooth").then(function(){return resolve(o("f1e0"))}.bind(null,o)).catch(o.oe)},remoteOpenDoor:function(){o.e("pages/door/remoteOpenDoor").then(function(){return resolve(o("56ef"))}.bind(null,o)).catch(o.oe)},yardPass:function(){o.e("pages/door/yardPass").then(function(){return resolve(o("afd6"))}.bind(null,o)).catch(o.oe)}},data:function(){return{isLoading:!1,hasBluetoothAccess:!0,logText:"",community:{},user:{},errorText:"",footerData:null,doorSwingConfigs:[],type:null,isCustomerStaff:!1,hackReset:!1}},computed:{hasLogin:function(){return this.user&&this.user.avatarUrl},hasRoom:function(){return this.user&&this.user.defaultHouseResourceId},isCustomerStaff:function(){return this.isCustomerStaff},errorTitle:function(){return this.hasLogin?this.isCustomerStaff?"暂不支持单位员工使用一键开门功能":this.hasRoom?this.hasBluetoothAccess?"":"还没有打开蓝牙":"您的名下暂无房间":"还没登录"},errorNote:function(){return this.hasLogin?this.isCustomerStaff?"":this.hasRoom?this.hasBluetoothAccess?"":"请先去手机设置中打开蓝牙":"请先去添加您的房间吧":"请先去授权登录吧"},errorButtonText:function(){return this.isCustomerStaff?"":this.hasLogin?this.hasRoom?"":"去添加":"去登录"}},onShow:function(){var e=this;if("function"===typeof this.$mp.page.getTabBar&&this.$mp.page.getTabBar()){this.$mp.page.getTabBar().updatePermissionData();var o=this.$mp.page.getTabBar().data.list,n=o.findIndex((function(t){return t.text===s.tabBarNameData.一键开门}));this.$mp.page.getTabBar().setData({selected:n})}this.hackReset=!1,this.$nextTick((function(){e.hackReset=!0})),this.isLoading=!1,this.community=t.getStorageSync(this.$config.storageKeys.community),this.getFooterData(),this.hasBluetoothAccess=!0,this.logText="",this.user=t.getStorageSync(this.$config.storageKeys.user),this.isCustomerStaff=t.getStorageSync(this.$config.storageKeys.isCustomerStaff),this.errorText="";setTimeout((function(){e.getDoorSwingConfig()}),200)},methods:{selectType:function(t){this.type=t},getDoorSwingConfig:function(){var t=this;t.isLoading=!0,t.$http.get("/api/v2.0/wechat/open-door/door-swing-config?isOpen=true").then((function(e){t.isLoading=!1,t.doorSwingConfigs=e,1===t.doorSwingConfigs.length||t.doorSwingConfigs.length>1&&null===t.type?t.type=t.doorSwingConfigs[0].type:0===t.doorSwingConfigs.length&&(t.type=null)})).catch((function(e){t.isLoading=!1}))},onButtonClick:function(){this.hasLogin?this.hasRoom||t.navigateTo({url:"../me/room/room"}):t.navigateTo({url:"../login/weixin/weixin"})},error:function(t){this.isLoading=!1,this.errorText=t},getFooterData:function(){var t=this;return(0,r.default)(i.default.mark((function e(){var o;return i.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$footerConfig.get();case 2:o=e.sent,t.footerData=o;case 4:case"end":return e.stop()}}),e)})))()},change:function(t){var e=this;this.hackReset=!1,setTimeout((function(){e.hackReset=!0}),200)}}};e.default=a}).call(this,o("543d")["default"])},"91cf":function(t,e,o){"use strict";var n=o("d322"),i=o.n(n);i.a},bfd5:function(t,e,o){"use strict";(function(t,e){var n=o("4ea4");o("895d");n(o("66fd"));var i=n(o("f96f"));t.__webpack_require_UNI_MP_PLUGIN__=o,e(i.default)}).call(this,o("bc2e")["default"],o("543d")["createPage"])},c513:function(t,e,o){"use strict";o.d(e,"b",(function(){return i})),o.d(e,"c",(function(){return r})),o.d(e,"a",(function(){return n}));var n={pageEmpty:function(){return o.e("components/page-empty/page-empty").then(o.bind(null,"1068"))}},i=function(){var t=this.$createElement,e=(this._self._c,this.hasRoom&&!this.isCustomerStaff?this.doorSwingConfigs.length:null);this.$mp.data=Object.assign({},{$root:{g0:e}})},r=[]},d322:function(t,e,o){},f96f:function(t,e,o){"use strict";o.r(e);var n=o("c513"),i=o("5d08");for(var r in i)["default"].indexOf(r)<0&&function(t){o.d(e,t,(function(){return i[t]}))}(r);o("91cf");var s=o("f0c5"),a=Object(s["a"])(i["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],void 0);e["default"]=a.exports}},[["bfd5","common/runtime","common/vendor"]]]);