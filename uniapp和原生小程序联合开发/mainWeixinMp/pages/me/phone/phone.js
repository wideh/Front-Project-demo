(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/me/phone/phone"],{"58ca":function(e,t,n){"use strict";(function(e,t){var o=n("4ea4");n("895d");o(n("66fd"));var r=o(n("8fc8"));e.__webpack_require_UNI_MP_PLUGIN__=n,t(r.default)}).call(this,n("bc2e")["default"],n("543d")["createPage"])},7851:function(e,t,n){},"7b68":function(e,t,n){"use strict";n.r(t);var o=n("e53f"),r=n.n(o);for(var i in o)["default"].indexOf(i)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(i);t["default"]=r.a},"8fc8":function(e,t,n){"use strict";n.r(t);var o=n("c433"),r=n("7b68");for(var i in r)["default"].indexOf(i)<0&&function(e){n.d(t,e,(function(){return r[e]}))}(i);n("ab49");var a=n("f0c5"),c=Object(a["a"])(r["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],void 0);t["default"]=c.exports},ab49:function(e,t,n){"use strict";var o=n("7851"),r=n.n(o);r.a},c433:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return o}));var o={userPrivacy:function(){return n.e("components/userPrivacy/userPrivacy").then(n.bind(null,"594f"))}},r=function(){var e=this.$createElement;this._self._c},i=[]},e53f:function(e,t,n){"use strict";(function(e,o){var r=n("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n("2eee")),a=r(n("c973")),c=r(n("0b6f")),u=(r(n("cb1a")),{data:function(){return{currentPhone:"",isGettingPhone:!1,showPrivacy:!1}},components:{userPrivacy:function(){n.e("components/userPrivacy/userPrivacy").then(function(){return resolve(n("594f"))}.bind(null,n)).catch(n.oe)}},onLoad:function(){var t=this;this.init(),e.onNeedPrivacyAuthorization&&e.onNeedPrivacyAuthorization((function(e,n){t.showPrivacy=!0,t.resolvePrivacyAuthorization=e}))},methods:{agreePrivacy:function(){this.showPrivacy=!1,this.resolvePrivacyAuthorization({buttonId:"agree-btn",event:"agree"})},disagreePrivacy:function(){this.showPrivacy=!1},init:function(){this.currentPhone=o.getStorageSync(this.$config.storageKeys.user).phoneNumber||"无"},onGetphonenumber:function(e){if(console.log("获取手机号",e),e.detail.encryptedData){var t=this;o.showLoading({title:"获取中"}),t.isGettingPhone=!0,t.$httpHd.get("/oauth/choerodon/v1/mp/user/wechat",{encryptedData:e.detail.encryptedData,iv:e.detail.iv,openId:o.getStorageSync(this.$config.storageKeys.openId)}).then(function(){var e=(0,a.default)(i.default.mark((function e(n){var r;return i.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,c.default.reLogin();case 2:r=e.sent,r?t.$http.post("/api/v2.0/wechat-mini-program-oauth/decryptphonenumber",{phoneNumber:n.phoneNumber,purePhoneNumber:n.purePhoneNumber,countryCode:n.countryCode}).then((function(e){t.$http.request("/api/v2.0/weChat/application-users/me/phonenumber",{phonenumber:e.phoneNumber,verificationcode:"111111"},{headers:{"Content-Type":"application/x-www-form-urlencoded"},method:"PUT"}).then((function(e){t.$datas.user.syncData(),o.showToast({title:"修改成功"}),setTimeout((function(){o.navigateBack()}),1500)})).catch((function(e){o.showToast({title:e.message,icon:"none"})})),t.isGettingPhone=!1})).catch((function(e){console.log(e),t.isGettingPhone=!1})):o.showToast({title:"重新登录失败"});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log(e)}))}}}});t.default=u}).call(this,n("bc2e")["default"],n("543d")["default"])}},[["58ca","common/runtime","common/vendor"]]]);