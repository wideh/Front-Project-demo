(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/me/room/room"],{"1ad7":function(e,o,n){"use strict";(function(e){var t=n("4ea4");Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var r=t(n("2eee")),a=t(n("c973")),u={components:{sudaRoomCard:function(){n.e("components/suda-room-card/suda-room-card").then(function(){return resolve(n("fab6"))}.bind(null,n)).catch(n.oe)},pageEmpty:function(){n.e("components/page-empty/page-empty").then(function(){return resolve(n("1068"))}.bind(null,n)).catch(n.oe)},sudaLoading:function(){n.e("components/suda-loading/suda-loading").then(function(){return resolve(n("09dd"))}.bind(null,n)).catch(n.oe)},customFooter:function(){n.e("components/custom-footer/custom-footer").then(function(){return resolve(n("7d39"))}.bind(null,n)).catch(n.oe)}},data:function(){return{isLoading:!0,rooms:[],isShowActionSheet:!1,footerData:null}},onLoad:function(){},onShow:function(){this.init(),this.getFooterData()},onHide:function(){var e=this;setTimeout((function(){e.rooms=[],e.isLoading=!0}),1e3)},methods:{init:function(){var e=this;e.$http.get("/api/v2.0/weChat/user-resources/house",{page:1,pageSize:999}).then((function(o){e.rooms=o.data,e.isLoading=!1})).catch((function(o){console.log(o.Message),e.isLoading=!1}))},displayAddress:function(e){return(e.regionName?e.regionName:"")+(e.groupName?"/"+e.groupName:"")+(e.buildingName?"/"+e.buildingName:"")+(e.unitName?"/"+e.unitName:"")+(e.resourceCode?"/"+e.resourceCode:"")},operation:function(o,n){var t=this;if(!t.isShowActionSheet){t.isShowActionSheet=!0;var r=["移除房间"];"业主"==o.relationTypeName?r=["租户管理","成员管理","移除房间"]:"租户"==o.relationTypeName&&(r=["成员管理","移除房间"]),e.showActionSheet({title:"标题",itemList:r,success:function(e){"成员管理"==r[e.tapIndex]?t.goToMember(o.resourceId,o.houseCustomerId):"租户管理"==r[e.tapIndex]?t.goToTenant(o.resourceId,o.houseCustomerId):t.deleteRoom(o.id,n)},complete:function(e){t.isShowActionSheet=!1}})}},goToMember:function(o,n){e.navigateTo({url:"member/member?resourceId="+o+"&houseCustomerId="+n})},goToTenant:function(o,n){e.navigateTo({url:"tenant/tenant?resourceId="+o+"&houseCustomerId="+n})},deleteRoom:function(o,n){var t=this;e.showModal({title:"移除房间信息",content:"您确定要移除房间信息吗？移除房间后，小程序中功能权限消失",success:function(r){r.confirm&&t.$http.request("/api/v2.0/weChat/user-resources/".concat(o),{},{headers:{"Content-Type":"application/x-www-form-urlencoded"},method:"DELETE"}).then((function(r){t.rooms.splice(n,1);var a=e.getStorageSync(t.$config.storageKeys.resource).resourceId;o==a&&e.removeStorageSync(t.$config.storageKeys.resource)})).catch((function(o){console.log(o),e.showToast({title:o.message,icon:"none"})}))}})},addRoom:function(){e.navigateTo({url:"/pages/position/room/room"})},getFooterData:function(){var e=this;return(0,a.default)(r.default.mark((function o(){var n;return r.default.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.next=2,e.$footerConfig.get();case 2:n=o.sent,e.footerData=n;case 4:case"end":return o.stop()}}),o)})))()}}};o.default=u}).call(this,n("543d")["default"])},"26f7":function(e,o,n){"use strict";var t=n("3b0e"),r=n.n(t);r.a},"358c":function(e,o,n){"use strict";n.r(o);var t=n("b932"),r=n("f647");for(var a in r)["default"].indexOf(a)<0&&function(e){n.d(o,e,(function(){return r[e]}))}(a);n("26f7");var u=n("f0c5"),i=Object(u["a"])(r["default"],t["b"],t["c"],!1,null,null,null,!1,t["a"],void 0);o["default"]=i.exports},"3b0e":function(e,o,n){},9686:function(e,o,n){"use strict";(function(e,o){var t=n("4ea4");n("895d");t(n("66fd"));var r=t(n("358c"));e.__webpack_require_UNI_MP_PLUGIN__=n,o(r.default)}).call(this,n("bc2e")["default"],n("543d")["createPage"])},b932:function(e,o,n){"use strict";n.d(o,"b",(function(){return r})),n.d(o,"c",(function(){return a})),n.d(o,"a",(function(){return t}));var t={sudaLoading:function(){return n.e("components/suda-loading/suda-loading").then(n.bind(null,"09dd"))},pageEmpty:function(){return n.e("components/page-empty/page-empty").then(n.bind(null,"1068"))},sudaRoomCard:function(){return n.e("components/suda-room-card/suda-room-card").then(n.bind(null,"fab6"))}},r=function(){var e=this,o=e.$createElement,n=(e._self._c,e.isLoading?null:e.rooms.length),t=e.isLoading||0==n?null:e.__map(e.rooms,(function(o,n){var t=e.__get_orig(o),r=e.displayAddress(o);return{$orig:t,m0:r}}));e.$mp.data=Object.assign({},{$root:{g0:n,l0:t}})},a=[]},f647:function(e,o,n){"use strict";n.r(o);var t=n("1ad7"),r=n.n(t);for(var a in t)["default"].indexOf(a)<0&&function(e){n.d(o,e,(function(){return t[e]}))}(a);o["default"]=r.a}},[["9686","common/runtime","common/vendor"]]]);