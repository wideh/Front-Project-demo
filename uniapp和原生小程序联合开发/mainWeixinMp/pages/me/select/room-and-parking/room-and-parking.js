(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/me/select/room-and-parking/room-and-parking"],{1542:function(e,n,o){},"3d2f":function(e,n,o){"use strict";o.r(n);var t=o("f193"),r=o("b2e4");for(var a in r)["default"].indexOf(a)<0&&function(e){o.d(n,e,(function(){return r[e]}))}(a);o("f8f1");var i=o("f0c5"),u=Object(i["a"])(r["default"],t["b"],t["c"],!1,null,null,null,!1,t["a"],void 0);n["default"]=u.exports},8718:function(e,n,o){"use strict";(function(e){var t=o("4ea4");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=t(o("2eee")),a=t(o("c973")),i={components:{uniTag:function(){o.e("node-modules/@dcloudio/uni-ui/lib/uni-tag/uni-tag").then(function(){return resolve(o("f7b5"))}.bind(null,o)).catch(o.oe)},sudaRoomCard:function(){o.e("components/suda-room-card/suda-room-card").then(function(){return resolve(o("fab6"))}.bind(null,o)).catch(o.oe)},pageEmpty:function(){o.e("components/page-empty/page-empty").then(function(){return resolve(o("1068"))}.bind(null,o)).catch(o.oe)},sudaLoading:function(){o.e("components/suda-loading/suda-loading").then(function(){return resolve(o("09dd"))}.bind(null,o)).catch(o.oe)},customFooter:function(){o.e("components/custom-footer/custom-footer").then(function(){return resolve(o("7d39"))}.bind(null,o)).catch(o.oe)}},data:function(){return{isLoading:!0,rooms:[],parkings:[],btnText:"新增车位",selectType:"",isTenant:!1,returnUrl:"",isShowActionSheet:!1,footerData:null,enableHouseRepair:!1,enableAnonymousRepair:!1}},onLoad:function(e){var n=this;n.selectType=e.selectType,n.isTenant=e.isTenant,n.initNavigationBarTitle(),n.returnUrl=e.returnUrl||"",n.enableHouseRepair=e.enableHouseRepair,n.enableAnonymousRepair="true"==e.enableAnonymousRepair},onShow:function(){this.init(),this.getFooterData()},onHide:function(){var e=this;setTimeout((function(){e.rooms=[],e.parkings=[],e.isLoading=!0}),1e3)},methods:{initNavigationBarTitle:function(){var n="";switch(this.selectType){case"both":n="选择房间/车位";break;case"parking":n="选择车位";break;case"room":n="选择房间";break;default:break}e.setNavigationBarTitle({title:n})},init:function(){var e=this;e.$http.get("/api/v2.0/weChat/user-resources/me").then((function(n){n&&("both"==e.selectType?(e.rooms=n.filter((function(e){return 5==e.itemType})),e.parkings=n.filter((function(e){return 7==e.itemType}))):"room"==e.selectType?e.rooms=n.filter((function(e){return 5==e.itemType})):"parking"==e.selectType&&(e.parkings=n.filter((function(e){return 7==e.itemType})))),e.isLoading=!1})).catch((function(n){e.isLoading=!1}))},roomClick:function(n){var o=this,t=o.displayAddress(n,3);e.setStorageSync("resource",{resourceId:n.resourceId,userResourceId:n.id,type:"room",isTenant:"租户"==n.relationTypeName,text:t,houseOwnerName:n.houseOwnerName,houseOwnerPhone:n.houseOwnerPhone}),o.returnUrl?"/packageRepair/flowRepair/new/new"===o.returnUrl?e.navigateTo({url:"".concat(o.returnUrl)+"?enableHouseRepair="+o.enableHouseRepair}):e.navigateTo({url:"".concat(o.returnUrl,"?resourceId=").concat(n.resourceId)}):e.navigateBack()},parkingClick:function(n){var o=this,t=o.displayAddress(n,3);e.setStorageSync("resource",{resourceId:n.resourceId,userResourceId:n.id,type:"parking",isTenant:!1,text:t}),o.returnUrl?"/packageRepair/flowRepair/new/new"===o.returnUrl?e.navigateTo({url:"".concat(o.returnUrl)+"?enableHouseRepair="+o.enableHouseRepair}):e.navigateTo({url:"".concat(o.returnUrl,"?resourceId=").concat(n.resourceId)}):e.navigateBack()},displayAddress:function(e,n){return 1==n?(e.buildingName?e.buildingName:"")+(e.regionAddress?"/"+e.regionAddress:"")+(e.unitName?"/"+e.unitName:"")+(e.resourceCode?"/"+e.resourceCode:""):2==n?(e.regionName?e.regionName:"")+(e.groupName?"/"+e.groupName:"")+(e.buildingName?"/"+e.buildingName:"")+(e.unitName?"/"+e.unitName:""):3==n?(e.city?e.city:"")+(e.regionName?"/"+e.regionName:"")+(e.groupName?"/"+e.groupName:"")+(e.buildingName?"/"+e.buildingName:"")+(e.unitName?"/"+e.unitName:"")+(e.resourceCode?"/"+e.resourceCode:""):void 0},selectAddType:function(){var n=this;n.isShowActionSheet||(n.isShowActionSheet=!0,e.showActionSheet({title:"标题",itemList:["添加房间","添加车位"],success:function(e){0==e.tapIndex?n.addRoom():n.addParking()},complete:function(){n.isShowActionSheet=!1}}))},addRoom:function(){e.navigateTo({url:"/pages/position/room/room"})},addParking:function(){e.navigateTo({url:"../../../position/position?targetKey="+this.$config.positionKeys.parkingSpace+"&returnUrl=/pages/me/parking/add/add"})},getFooterData:function(){var e=this;return(0,a.default)(r.default.mark((function n(){var o;return r.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,e.$footerConfig.get();case 2:o=n.sent,e.footerData=o;case 4:case"end":return n.stop()}}),n)})))()},gotoSelectRoom:function(){e.navigateTo({url:"../../../position/position?targetKey=roomOld&isRoomOld=true"})}}};n.default=i}).call(this,o("543d")["default"])},b2e4:function(e,n,o){"use strict";o.r(n);var t=o("8718"),r=o.n(t);for(var a in t)["default"].indexOf(a)<0&&function(e){o.d(n,e,(function(){return t[e]}))}(a);n["default"]=r.a},ea7f:function(e,n,o){"use strict";(function(e,n){var t=o("4ea4");o("895d");t(o("66fd"));var r=t(o("3d2f"));e.__webpack_require_UNI_MP_PLUGIN__=o,n(r.default)}).call(this,o("bc2e")["default"],o("543d")["createPage"])},f193:function(e,n,o){"use strict";o.d(n,"b",(function(){return r})),o.d(n,"c",(function(){return a})),o.d(n,"a",(function(){return t}));var t={sudaLoading:function(){return o.e("components/suda-loading/suda-loading").then(o.bind(null,"09dd"))},pageEmpty:function(){return o.e("components/page-empty/page-empty").then(o.bind(null,"1068"))},sudaRoomCard:function(){return o.e("components/suda-room-card/suda-room-card").then(o.bind(null,"fab6"))}},r=function(){var e=this,n=e.$createElement,o=(e._self._c,e.isLoading||e.enableAnonymousRepair?null:0==e.rooms.length&&0==e.parkings.length),t=e.isLoading||e.enableAnonymousRepair||o?null:e.__map(e.rooms,(function(n,o){var t=e.__get_orig(n),r=e.displayAddress(n,1);return{$orig:t,m0:r}})),r=e.isLoading||e.enableAnonymousRepair||o?null:e.__map(e.parkings,(function(n,o){var t=e.__get_orig(n),r=e.displayAddress(n,2);return{$orig:t,m1:r}})),a=!e.isLoading&&e.enableAnonymousRepair?0==e.rooms.length&&0==e.parkings.length:null,i=e.isLoading||!e.enableAnonymousRepair||a?null:e.__map(e.rooms,(function(n,o){var t=e.__get_orig(n),r=e.displayAddress(n,1);return{$orig:t,m2:r}})),u=e.isLoading||!e.enableAnonymousRepair||a?null:e.__map(e.parkings,(function(n,o){var t=e.__get_orig(n),r=e.displayAddress(n,2);return{$orig:t,m3:r}})),s=e.isLoading?null:e.enableAnonymousRepair&&(e.rooms.length>0||e.parkings.length>0);e.$mp.data=Object.assign({},{$root:{g0:o,l0:t,l1:r,g1:a,l2:i,l3:u,g2:s}})},a=[]},f8f1:function(e,n,o){"use strict";var t=o("1542"),r=o.n(t);r.a}},[["ea7f","common/runtime","common/vendor"]]]);