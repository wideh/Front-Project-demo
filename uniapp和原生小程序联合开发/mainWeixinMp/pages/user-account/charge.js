(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/user-account/charge"],{"02cb":function(t,e,n){"use strict";n.r(e);var a=n("ea34"),o=n.n(a);for(var c in a)["default"].indexOf(c)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(c);e["default"]=o.a},3505:function(t,e,n){},"425f":function(t,e,n){"use strict";n.r(e);var a=n("e015"),o=n("02cb");for(var c in o)["default"].indexOf(c)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(c);n("d8c7");var r=n("f0c5"),i=Object(r["a"])(o["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],void 0);e["default"]=i.exports},"799e":function(t,e,n){"use strict";(function(t,e){var a=n("4ea4");n("895d");a(n("66fd"));var o=a(n("425f"));t.__webpack_require_UNI_MP_PLUGIN__=n,e(o.default)}).call(this,n("bc2e")["default"],n("543d")["createPage"])},d8c7:function(t,e,n){"use strict";var a=n("3505"),o=n.n(a);o.a},e015:function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){}));var a=function(){var t=this.$createElement;this._self._c},o=[]},ea34:function(t,e,n){"use strict";(function(t){var a=n("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=a(n("2eee")),c=a(n("c973")),r=a(n("7504")),i={components:{customFooter:function(){n.e("components/custom-footer/custom-footer").then(function(){return resolve(n("7d39"))}.bind(null,n)).catch(n.oe)}},data:function(){return{apiBaseUrl:r.default.apiWYBaseUrl,chargeInfo:{},selectChargeBtn:50,inputAmount:"",chargeAmount:50,footerData:null}},onLoad:function(t){console.log("charge => onLoad");this.getData(t.accountId,t.userResourceId,t.fnAccountId)},onShow:function(){this.getFooterData()},computed:{fnAccountIcon:function(){return this.chargeInfo.fnAccountIcon?"".concat(this.apiBaseUrl,"/chargeItemType/").concat(this.chargeInfo.fnAccountIcon):""}},methods:{getData:function(e,n,a){var o=this;t.showNavigationBarLoading(),t.showLoading({title:"加载中...",mask:!0}),e?o.$http.get("/api/v2.0/wechat/user-accounts/".concat(e)).then((function(e){o.chargeInfo=e,t.hideNavigationBarLoading(),t.hideLoading()})):o.$http.get("/api/v2.0/wechat/user-accounts",{userResourceId:n,fnAccountId:a}).then((function(e){o.chargeInfo=e,t.hideNavigationBarLoading(),t.hideLoading()}))},recharge:function(){t.showLoading({title:"支付中...",mask:!0}),this.$http.post("/api/v2.0/wechat/unified-orders/pre-paid",{houseId:this.chargeInfo.organizationItemId,payClassId:this.chargeInfo.fnAccountId,amount:this.chargeAmount,paidType:7,remark:"小程序充值".concat(this.chargeAmount,"元")}).then((function(e){var n=JSON.parse(e);t.requestPayment({provider:"wxpay",timeStamp:n.timeStamp,nonceStr:n.nonceStr,package:n.package,signType:n.signType,paySign:n.paySign,success:function(e){for(var n=getCurrentPages(),a=0,o=n.length;o>0;o--)a++;var c=n[n.length-a-1];c.$vm.getData(),t.navigateBack({delta:a})},fail:function(t){},complete:function(e){t.hideLoading()}})})).catch((function(e){t.hideLoading(),t.showModal({title:"提示",content:"".concat(e.message),success:function(t){}})}))},viewChargeHistory:function(){t.navigateTo({url:"charge-history"})},onClick_amountbtn:function(t){switch(t){case 50:case 100:case 150:this.selectChargeBtn=t,this.inputAmount="",this.chargeAmount=t;break;default:this.selectChargeBtn=0;break}},onKey_Input:function(t){this.selectChargeBtn=0;var e=t.target.value;return e=e.replace(/[^\d.]/g,""),e=e.replace(".","$#$").replace(/\./g,"").replace("$#$","."),e=e.replace(/^\./,"0."),e=e.replace(/^(\-)*(\d+)\.(\d\d).*$/,"$1$2.$3"),e.indexOf(".")<0&&""!=e&&(e=parseFloat(e)),this.chargeAmount=parseFloat(e),e},getFooterData:function(){var t=this;return(0,c.default)(o.default.mark((function e(){var n;return o.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$footerConfig.get();case 2:n=e.sent,t.footerData=n;case 4:case"end":return e.stop()}}),e)})))()}}};e.default=i}).call(this,n("543d")["default"])}},[["799e","common/runtime","common/vendor"]]]);